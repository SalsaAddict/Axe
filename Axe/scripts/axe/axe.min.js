"use strict";var Axe,axe;(function(n){function t(n){return n===undefined?!0:n===null?!0:n===NaN?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function i(n,i){return i===void 0&&(i=undefined),t(n)?i:n}function u(n,t,r){var u,f;return t===void 0&&(t=""),r===void 0&&(r=[]),u=angular.lowercase(String(n)).trim(),r.length>0&&(f=!1,angular.forEach(r,function(n){angular.lowercase(n).trim()===u&&(f=!0)}),f||(u=undefined)),i(u,angular.lowercase(t).trim())}function f(n,f,e){var o,s;if(e===void 0&&(e=undefined),t(n))return e;o=n;switch(f){case r.integer:o=parseInt(parseFloat(o).toFixed(0),10);break;case r.decimal:o=parseFloat(parseFloat(o).toFixed(2));break;case r.percent:o=parseFloat(parseFloat(o).toFixed(4));break;case r.date:s="YYYY-MM-DD";switch(u(o)){case"today":o=moment().format(s);break;case"tomorrow":o=moment().add("d",1).format(s);break;case"yesterday":o=moment().subtract("d",1).format(s);break;default:o=moment(o,"DD/MM/YYYY").format(s);moment(o).isValid()||(o=undefined)}break;case r.boolean:o=u(n,"false",["true","yes","1"])!=="false";break;case r.object:o=angular.fromJson(angular.toJson(o));break;default:o=String(n)}return i(o,e)}var r,s,e,o,h;n.IsBlank=t;n.IfBlank=i;n.Option=u,function(n){n[n.text=0]="text";n[n.integer=1]="integer";n[n.decimal=2]="decimal";n[n.percent=3]="percent";n[n.date=4]="date";n[n.time=5]="time";n[n.boolean=6]="boolean";n[n.object=7]="object"}(n.EFormat||(n.EFormat={}));r=n.EFormat;n.Parse=f,function(n){var t=function(){function n(n){var t=this;this.$scope=n;this.$procedures={};this.addProcedure=function(n){t.$procedures[n.alias]=n;n.runType!==e.ERunType.manual&&n.execute()};this.removeProcedure=function(n){angular.isDefined(t.$procedures[n])&&delete t.$procedures[n]};this.execute=undefined;this.$scope.$parent.axe={execute:undefined};this.execute=this.$scope.$parent.axe.execute=function(n){t.$procedures[n].execute()}}return Object.defineProperty(n.prototype,"heading",{get:function(){return i(this.$scope.heading)},enumerable:!0,configurable:!0}),n.$inject=["$scope"],n}();n.Controller=t}(s=n.Context||(n.Context={})),function(n){var s,e,h;(function(n){n[n.manual=0]="manual";n[n.auto=1]="auto";n[n.once=2]="once"})(n.ERunType||(n.ERunType={}));s=n.ERunType,function(n){n[n.array=0]="array";n[n.singleton=1]="singleton";n[n.object=2]="object"}(n.EModelType||(n.EModelType={}));e=n.EModelType;h=function(){function h(i,u,s,h){var c=this;this.$scope=i;this.$routeParams=u;this.$parse=s;this.$log=h;this.$parameters={};this.execute=function(){var n=!0,i={name:c.name,parameters:[],object:c.modelType===e.object,objectRoot:c.objectRoot};angular.forEach(c.$parameters,function(u){u.required&&t(u.value)&&(n=!1);i.parameters.push({name:u.name,value:u.value,object:u.format===r.object})});n&&c.$log.debug(angular.toJson(i))};this.addParameter=function(t){c.$parameters[t.name]=t;c.runType===n.ERunType.auto&&(t.$watch=c.$scope.$watch(function(){return angular.toJson(t.value)},function(n,t){n!==t&&c.execute()}))};this.removeParameter=function(n){angular.isDefined(c.$parameters[n])&&(angular.isFunction(c.$parameters[n].$watch)&&c.$parameters[n].$watch(),delete c.$parameters[n])};f(this.$scope.routeParams,r.boolean)&&angular.forEach(this.$routeParams,function(n,t){var i=c.$scope.$parent.$new(!0);i.name=t;i.required="true";c.addParameter(new o.Controller(i,c.$routeParams,c.$parse))})}return Object.defineProperty(h.prototype,"name",{get:function(){return i(this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"alias",{get:function(){return i(this.$scope.alias,this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"runType",{get:function(){return i(s[u(this.$scope.run)],s.manual)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hasModel",{get:function(){return!t(this.$scope.model)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"modelExpression",{get:function(){return i(this.$scope.model)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"modelType",{get:function(){return this.hasModel?t(this.$scope.type)?t(this.$scope.root)?e.array:e.object:i(e[u(this.$scope.type)],e.array):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"objectRoot",{get:function(){return this.modelType===e.object?this.$scope.root:undefined},enumerable:!0,configurable:!0}),h.$inject=["$scope","$routeParams","$parse","$log"],h}();n.Controller=h}(e=n.Procedure||(n.Procedure={})),function(n){(function(n){n[n.route=0]="route";n[n.scope=1]="scope";n[n.value=2]="value"})(n.EType||(n.EType={}));var e=n.EType,o=function(){function n(n,t,i){this.$scope=n;this.$routeParams=t;this.$parse=i;this.$watch=undefined}return Object.defineProperty(n.prototype,"name",{get:function(){return i(this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return t(this.$scope.type)?t(this.$scope.value)?e.route:e.value:e[u(this.$scope.type,e[e.value],[e[e.route],e[e.scope]])]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueExpression",{get:function(){return t(this.$scope.value)?this.type===e.route?this.name:undefined:this.$scope.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return i(r[u(this.$scope.format)],r.text)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(t(this.valueExpression))return null;var n=undefined;switch(this.type){case e.route:n=this.$routeParams[this.valueExpression];break;case e.scope:n=this.$parse(this.valueExpression)(this.$scope.$parent);break;default:n=this.valueExpression}return f(n,this.format,null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return Boolean(f(this.$scope.required,r.boolean))},enumerable:!0,configurable:!0}),n.$inject=["$scope","$routeParams","$parse"],n}();n.Controller=o}(o=n.Parameter||(n.Parameter={})),function(n){var r=function(){function n(n,i,r,u){var f=this;this.$scope=n;this.$window=i;this.$location=r;this.$route=u;this.context=undefined;this.back=function(){t(f.$scope.back)?f.$window.history.back():f.$location.path(f.$scope.back)};this.undo=function(){f.$route.reload()};this.save=function(){f.context.execute(f.$scope.save)};this.delete=function(){f.context.execute(f.$scope.delete)}}return Object.defineProperty(n.prototype,"heading",{get:function(){return i(this.$scope.heading)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"subheading",{get:function(){return i(this.$scope.subheading)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"loadProcedure",{get:function(){return i(this.$scope.load)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editable",{get:function(){return!t(this.$scope.save)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"deleteable",{get:function(){return!t(this.$scope.delete)},enumerable:!0,configurable:!0}),n.$inject=["$scope","$window","$location","$route"],n}();n.Controller=r}(h=n.Form||(n.Form={}))})(Axe||(Axe={}));axe=angular.module("axe",["ngRoute","templates/axeContext.html","templates/axeForm.html"]);axe.directive("axeContext",function(){return{restrict:"E",templateUrl:"templates/axeContext.html",transclude:!0,scope:{heading:"@"},controller:Axe.Context.Controller,controllerAs:"axeContext"}});axe.directive("axeProcedure",function(){return{restrict:"E",scope:{name:"@",alias:"@",run:"@",model:"@",type:"@",root:"@",routeParams:"@"},controller:Axe.Procedure.Controller,require:["^axeContext","axeProcedure"],link:function(n,t,i,r){r[0].addProcedure(r[1]);n.$on("$destroy",function(){r[0].removeProcedure(r[1].alias)})}}});axe.directive("axeParameter",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:Axe.Parameter.Controller,require:["^axeProcedure","axeParameter"],link:function(n,t,i,r){r[0].addParameter(r[1]);n.$on("$destroy",function(){r[0].removeParameter(r[1].name)})}}});axe.directive("axeForm",function(){return{restrict:"E",templateUrl:"templates/axeForm.html",transclude:!0,scope:{heading:"@",subheading:"@",back:"@",load:"@",save:"@","delete":"@"},controller:Axe.Form.Controller,controllerAs:"axeForm",require:["^axeContext","axeForm"],link:function(n,t,i,r){r[1].context=r[0]}}});angular.module("templates/axeContext.html",[]).run(["$templateCache",function(n){n.put("templates/axeContext.html",'<div ng-if="axeContext.heading" class="text-center"><h4 class="text-uppercase text-primary">{{axeContext.heading}}<\/h4><\/div><ng-transclude><\/ng-transclude>')}]);angular.module("templates/axeForm.html",[]).run(["$templateCache",function(n){n.put("templates/axeForm.html",'<div class="panel panel-default" ng-form="form"><div ng-if="axeForm.heading" class="panel-heading"><h4 class="text-uppercase"><b>{{axeForm.heading}}<\/b><span ng-show="form.$dirty && form.$invalid"> <i class="fa fa-exclamation-triangle text-danger"><\/i><\/span><span ng-if="axeForm.subheading" class="small"><br />{{axeForm.subheading}}<\/span><\/h4><\/div><div class="panel-body" ng-transclude><\/div><div class="panel-footer clearfix"><div class="pull-right"><div ng-hide="form.$dirty" class="btn-group"><button ng-if="axeForm.deleteable" type="button" class="btn btn-danger" ng-click="axeForm.delete()"><i class="fa fa-trash-o"><\/i> Delete<\/button><button type="button" class="btn btn-default" ng-click="axeForm.back()"><i class="fa fa-chevron-circle-left"><\/i> Back<\/button><\/div><div ng-show="form.$dirty" class="btn-group"><button type="button" class="btn btn-warning" ng-click="axeForm.undo()"><i class="fa fa-undo"><\/i> Undo<\/button><button type="button" class="btn" ng-class="{\'btn-primary\': form.$valid, \'btn-default\': form.$invalid}" ng-click="axeForm.save()" ng-disabled="form.$invalid"><i class="fa fa-save"><\/i> Save<\/button><\/div><\/div><\/div><\/div>')}]);
//# sourceMappingURL=axe.min.js.map
