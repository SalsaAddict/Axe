"use strict";var Axe,axe;(function(n){function r(n){return n===undefined?!0:n===null?!0:n===NaN?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function t(n,t){return t===void 0&&(t=undefined),r(n)?t:n}function o(n,i,r){var u,f;return i===void 0&&(i=""),r===void 0&&(r=[]),u=angular.lowercase(String(n)).trim(),r.length>0&&(f=!1,angular.forEach(r,function(n){angular.lowercase(n).trim()===u&&(f=!0)}),f||(u=undefined)),t(u,angular.lowercase(i).trim())}function f(n,u,f){var e,s;if(f===void 0&&(f=undefined),r(n))return f;e=n;switch(u){case i.integer:e=parseInt(parseFloat(n).toFixed(0),10);break;case i.decimal:e=parseFloat(parseFloat(n).toFixed(2));break;case i.percent:e=parseFloat(parseFloat(n).toFixed(4));break;case i.date:s="YYYY-MM-DD";switch(o(n)){case"today":e=moment().format(s);break;case"tomorrow":e=moment().add("d",1).format(s);break;case"yesterday":e=moment().subtract("d",1).format(s);break;default:e=moment(n,"DD/MM/YYYY");moment(e).isValid()||(e=moment(n));e=moment(e).format(s);moment(e).isValid()||(e=undefined)}break;case i.boolean:e=o(n,"false",["true","yes","1"])!=="false";break;case i.object:e=angular.fromJson(angular.toJson(e));break;default:e=String(n)}return t(e,f)}var i,e,u,h,c,l,s,a;n.IsBlank=r;n.IfBlank=t;n.Option=o,function(n){n[n.text=0]="text";n[n.integer=1]="integer";n[n.decimal=2]="decimal";n[n.percent=3]="percent";n[n.date=4]="date";n[n.time=5]="time";n[n.boolean=6]="boolean";n[n.object=7]="object"}(n.EFormat||(n.EFormat={}));i=n.EFormat,function(n){n[n.sm=0]="sm";n[n.md=1]="md";n[n.lg=2]="lg"}(n.ESize||(n.ESize={}));e=n.ESize,function(n){n[n.primary=0]="primary";n[n.success=1]="success";n[n.warning=2]="warning";n[n.danger=3]="danger"}(n.EContext||(n.EContext={}));u=n.EContext;n.Parse=f,function(n){var r=function(){function n(n,r){var u=this;this.$modal=n;this.$timeout=r;this.alert=function(n,r,o,s){o===void 0&&(o=e.sm);s===void 0&&(s=0);var h=u.$modal.open({templateUrl:"templates/axeAlert.html",backdrop:"static",keyboard:!1,size:e[o],resolve:{context:function(){return n},message:function(){return r}},controller:t,controllerAs:"axeAlert"});f(s,i.integer,0)>0&&u.$timeout(function(){h.close()},s)}}return n.$inject=["$modal","$timeout"],n}(),t;n.Service=r;t=function(){function n(n,t,i,r){var u=this;this.$scope=n;this.$modalInstance=t;this.context=i;this.message=r;this.close=function(n){n.preventDefault();n.stopPropagation();u.$modalInstance.close()}}return Object.defineProperty(n.prototype,"heading",{get:function(){switch(this.context){case u.primary:return"Info";case u.success:return"Success";case u.warning:return"Warning";case u.danger:return"Error"}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"faIcon",{get:function(){switch(this.context){case u.primary:return"fa-info-circle";case u.success:return"fa-check-circle";case u.warning:return"fa-exclamation-circle";case u.danger:return"fa-times-circle"}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textContext",{get:function(){return"text-"+u[this.context]},enumerable:!0,configurable:!0}),n.$inject=["$scope","$modalInstance","context","message"],n}();n.Controller=t}(h=n.Alert||(n.Alert={})),function(n){var i=function(){function n(n){var i=this;this.$modal=n;this.confirm=function(n,r,u,f,o){return u===void 0&&(u=e.md),f===void 0&&(f="Yes"),o===void 0&&(o="No"),i.$modal.open({templateUrl:"templates/axeConfirm.html",backdrop:"static",keyboard:!1,size:e[u],resolve:{heading:function(){return n},message:function(){return r},yesButtonText:function(){return f},noButtonText:function(){return o}},controller:t,controllerAs:"axeConfirm"})}}return n.$inject=["$modal"],n}(),t;n.Service=i;t=function(){function n(n,t,i,r,u,f){var e=this;this.$scope=n;this.$modalInstance=t;this.heading=i;this.message=r;this.yesButtonText=u;this.noButtonText=f;this.yes=function(n){n.preventDefault();n.stopPropagation();e.$modalInstance.close()};this.no=function(n){n.preventDefault();n.stopPropagation();e.$modalInstance.dismiss()}}return n.$inject=["$scope","$modalInstance","heading","message","yesButtonText","noButtonText"],n}();n.Controller=t}(c=n.Confirm||(n.Confirm={})),function(n){var i=function(){function n(n,t){var i=this;this.$scope=n;this.$log=t;this.$procedures={};this.addProcedure=function(n){i.$procedures[n.alias]=n;n.runType!==s.ERunType.manual&&n.execute()};this.removeProcedure=function(n){angular.isDefined(i.$procedures[n])&&delete i.$procedures[n]};this.addParameter=function(n,t){i.$procedures[n].addParameter(t)};this.removeParameter=function(n,t){i.$procedures[n].removeParameter(t)};this.execute=undefined;this.$scope.$parent.axe={execute:undefined};this.execute=this.$scope.$parent.axe.execute=function(n){angular.isDefined(i.$procedures[n])?i.$procedures[n].execute():t.error('Axe.Context.Execute: "'+n+'" has not been defined')}}return Object.defineProperty(n.prototype,"heading",{get:function(){return t(this.$scope.heading)},enumerable:!0,configurable:!0}),n.$inject=["$scope","$log"],n}();n.Controller=i}(l=n.Context||(n.Context={})),function(n){var e,u,s,h;(function(n){n[n.manual=0]="manual";n[n.auto=1]="auto";n[n.once=2]="once"})(n.ERunType||(n.ERunType={}));e=n.ERunType,function(n){n[n.array=0]="array";n[n.singleton=1]="singleton";n[n.object=2]="object"}(n.EModelType||(n.EModelType={}));u=n.EModelType;s=function(){function s(t,e,o,s){var c=this;this.$scope=t;this.$routeParams=e;this.$parse=o;this.$log=s;this.$parameters={};this.execute=function(){var n=!0,t={name:c.name,parameters:[],object:c.modelType===u.object,objectRoot:c.objectRoot};angular.forEach(c.$parameters,function(u){u.required&&r(u.value)&&(n=!1);t.parameters.push({name:u.name,value:u.value,object:u.format===i.object})});n&&c.$log.debug(angular.toJson(t))};this.addParameter=function(t){c.$parameters[t.name]=t;c.runType===n.ERunType.auto&&(t.$watch=c.$scope.$watch(function(){return angular.toJson(t.value)},function(n,t){n!==t&&c.execute()}))};this.removeParameter=function(n){angular.isDefined(c.$parameters[n])&&(angular.isFunction(c.$parameters[n].$watch)&&c.$parameters[n].$watch(),delete c.$parameters[n])};f(this.$scope.routeParams,i.boolean)&&angular.forEach(this.$routeParams,function(n,t){var i=c.$scope.$parent.$new(!0);i.name=t;i.required="true";c.addParameter(new h.Controller(i,c.$routeParams,c.$parse))})}return Object.defineProperty(s.prototype,"name",{get:function(){return t(this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"alias",{get:function(){return t(this.$scope.alias,this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"runType",{get:function(){return t(e[o(this.$scope.run)],e.manual)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasModel",{get:function(){return!r(this.$scope.model)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"modelExpression",{get:function(){return t(this.$scope.model)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"modelType",{get:function(){return this.hasModel?r(this.$scope.type)?r(this.$scope.root)?u.array:u.object:t(u[o(this.$scope.type)],u.array):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"objectRoot",{get:function(){return this.modelType===u.object?this.$scope.root:undefined},enumerable:!0,configurable:!0}),s.$inject=["$scope","$routeParams","$parse","$log"],s}();n.Controller=s,function(n){(function(n){n[n.route=0]="route";n[n.scope=1]="scope";n[n.value=2]="value"})(n.EType||(n.EType={}));var u=n.EType,e=function(){function n(n,t,i){this.$scope=n;this.$routeParams=t;this.$parse=i;this.$watch=undefined}return Object.defineProperty(n.prototype,"name",{get:function(){return t(this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return r(this.$scope.type)?r(this.$scope.value)?u.route:u.value:u[o(this.$scope.type,u[u.value],[u[u.route],u[u.scope]])]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueExpression",{get:function(){return r(this.$scope.value)?this.type===u.route?this.name:undefined:this.$scope.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return t(i[o(this.$scope.format)],i.text)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(r(this.valueExpression))return null;var n=undefined;switch(this.type){case u.route:n=this.$routeParams[this.valueExpression];break;case u.scope:n=this.$parse(this.valueExpression)(this.$scope.$parent);break;default:n=this.valueExpression}return f(n,this.format,null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return Boolean(f(this.$scope.required,i.boolean))},enumerable:!0,configurable:!0}),n.$inject=["$scope","$routeParams","$parse"],n}();n.Controller=e}(h=n.Parameter||(n.Parameter={}))}(s=n.Procedure||(n.Procedure={})),function(n){var o=function(){function n(n,t,i,f,o,s,h){var c=this;this.$scope=n;this.$window=t;this.$location=i;this.$route=f;this.$filter=o;this.$axeConfirm=s;this.$axeAlert=h;this.$parent=undefined;this.back=function(n){n.preventDefault();n.stopPropagation();r(c.$scope.back)?c.$window.history.back():c.$location.path(c.$scope.back)};this.reload=function(){r(c.$scope.load)||c.$parent.execute(c.$scope.load)};this.undo=function(n){n.preventDefault();n.stopPropagation();c.$axeConfirm.confirm("Undo Changes","Are you sure you want to undo your changes?",e.sm).result.then(function(){c.$route.reload()})};this.save=function(n){n.preventDefault();n.stopPropagation();c.$parent.execute(c.$scope.save)};this.delete=function(n){n.preventDefault();n.stopPropagation();c.$axeConfirm.confirm("Delete Record","Are you sure you want to delete this record?",e.sm).result.then(function(){c.$parent.execute(c.$scope.delete);c.$axeAlert.alert(u.success,"The record has been successfully deleted.",e.sm,3e3)})};this.$sections=[];this.addSection=function(n){n.$parent=c;n.$index=c.$sections.push(n)-1};this.removeSection=function(n){var t=c.$sections.indexOf(n);t>=0&&c.$sections.splice(t,1)};this.activateSection=function(n){angular.forEach(c.$sections,function(n){n.$active=!1});n.$active=!0};this.addSaveParameter=function(n){c.$parent.addParameter(c.$scope.save,n)}}return Object.defineProperty(n.prototype,"heading",{get:function(){return t(this.$scope.heading)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"subheading",{get:function(){return t(this.$scope.subheading)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editable",{get:function(){return!r(this.$scope.save)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"deleteable",{get:function(){return!r(this.$scope.delete)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dirty",{get:function(){return this.$scope.form.$dirty},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"invalid",{get:function(){return this.$scope.form.$invalid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valid",{get:function(){return this.$scope.form.$valid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasError",{get:function(){return this.$scope.form.$dirty&&this.$scope.form.$invalid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sections",{get:function(){return this.$filter("orderBy")(this.$sections,["sortOrder","$index"])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelWidth",{get:function(){return f(this.$scope.labelWidth,i.integer,3)},enumerable:!0,configurable:!0}),n.$inject=["$scope","$window","$location","$route","$filter","$axeConfirm","$axeAlert"],n}(),s;n.Controller=o,function(n){var u=function(){function n(n){this.$scope=n;this.$parent=undefined;this.$index=0;this.$active=!1}return Object.defineProperty(n.prototype,"heading",{get:function(){return t(this.$scope.heading,"Tab "+t(this.$index,0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortOrder",{get:function(){return f(this.$scope.sort,i.integer,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasError",{get:function(){return this.$scope.form.$valid?!1:angular.isUndefined(this.$parent)?!1:this.$parent.dirty},enumerable:!0,configurable:!0}),n.$inject=["$scope"],n}(),e;n.Controller=u,function(n){var u=function(){function n(n){this.$scope=n;this.$parent=undefined}return Object.defineProperty(n.prototype,"heading",{get:function(){return t(this.$scope.heading)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelWidth",{get:function(){var n=f(this.$scope.width,i.integer);return r(n)&&angular.isDefined(this.$parent)&&angular.isDefined(this.$parent.$parent)&&(n=f(this.$parent.$parent.labelWidth,i.integer)),n=t(n,3),n>=1&&n<=6?n:3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemWidth",{get:function(){return 12-this.labelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasError",{get:function(){return this.$scope.form.$valid?!1:angular.isUndefined(this.$parent)?!1:angular.isUndefined(this.$parent.$parent)?!1:this.$parent.$parent.dirty},enumerable:!0,configurable:!0}),n.$inject=["$scope"],n}();n.Controller=u}(e=n.Label||(n.Label={}))}(s=n.Section||(n.Section={}))}(a=n.Form||(n.Form={}))})(Axe||(Axe={}));axe=angular.module("axe",["ngRoute","ui.bootstrap","templates/axeAlert.html","templates/axeConfirm.html","templates/axeContext.html","templates/axeForm.html","templates/axeFormSection.html","templates/axeFormLabel.html"]);axe.config(function(){moment.locale("en-us");window.console.debug(JSON.stringify(moment.locale()))});axe.service("$axeAlert",Axe.Alert.Service);axe.service("$axeConfirm",Axe.Confirm.Service);axe.directive("axeContext",function(){return{restrict:"E",templateUrl:"templates/axeContext.html",transclude:!0,scope:{heading:"@"},controller:Axe.Context.Controller,controllerAs:"axeContext"}});axe.directive("axeProcedure",function(){return{restrict:"E",scope:{name:"@",alias:"@",run:"@",model:"@",type:"@",root:"@",routeParams:"@"},controller:Axe.Procedure.Controller,require:["^axeContext","axeProcedure"],link:{pre:function(n,t,i,r){r[0].addProcedure(r[1]);n.$on("$destroy",function(){r[0].removeProcedure(r[1].alias)})}}}});axe.directive("axeParameter",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:Axe.Procedure.Parameter.Controller,require:["^axeProcedure","axeParameter"],link:{pre:function(n,t,i,r){r[0].addParameter(r[1]);n.$on("$destroy",function(){r[0].removeParameter(r[1].name)})}}}});axe.directive("axeForm",function(){return{restrict:"E",templateUrl:"templates/axeForm.html",transclude:!0,scope:{heading:"@",subheading:"@",back:"@",load:"@",save:"@","delete":"@",labelWidth:"@"},controller:Axe.Form.Controller,controllerAs:"axeForm",require:["^axeContext","axeForm"],link:{pre:function(n,t,i,r){r[1].$parent=r[0]},post:function(n,t,i,r){r[1].reload();r[1].sections.length>0&&r[1].activateSection(r[1].sections[0])}}}});axe.directive("axeFormSection",function(){return{restrict:"E",templateUrl:"templates/axeFormSection.html",transclude:!0,scope:{heading:"@",sort:"@"},controller:Axe.Form.Section.Controller,controllerAs:"axeFormSection",require:["^axeForm","axeFormSection"],link:{pre:function(n,t,i,r){r[0].addSection(r[1]);n.$on("$destroy",function(){r[0].removeSection(r[1])})}}}});axe.directive("axeFormLabel",function(){return{restrict:"E",templateUrl:"templates/axeFormLabel.html",transclude:!0,scope:{heading:"@",width:"@"},controller:Axe.Form.Section.Label.Controller,controllerAs:"axeFormLabel",require:["^axeFormSection","axeFormLabel"],link:{pre:function(n,t,i,r){r[1].$parent=r[0]}}}});axe.directive("axeFormInput",["$filter","$log",function(){return{restrict:"A",require:["ngModel"],link:{pre:function(n,t,i,r){t.hasClass("form-control")||t.addClass("form-control");switch(Axe.Option(i.axeFormInput,"")){case"date":i.$set("placeholder",angular.uppercase(moment.localeData().longDateFormat("L")));r[0].$parsers.push(function(n){var t=moment.localeData().longDateFormat("L");return moment(n,t).isValid()?moment(n,t).format("YYYY-MM-DD"):undefined});r[0].$formatters.push(function(n){return Axe.IsBlank(n)?undefined:moment(n).format("L")})}}}}}]);axe.directive("axeSave",function(){return{restrict:"A",require:["ngModel","^axeFormLabel"],link:{pre:function(n,t,i,r){var f=angular.injector(["ngRoute"]),u=n.$new(!0);u.name=i.axeSave;u.type="scope";u.value=i.ngModel;u.format=i.axeFormat;angular.isDefined(i.required)&&(u.required="true");r[1].$parent.$parent.addSaveParameter(f.instantiate(Axe.Procedure.Parameter.Controller,{$scope:u}))}}}});angular.module("templates/axeAlert.html",[]).run(["$templateCache",function(n){n.put("templates/axeAlert.html",'<div class="modal-header"><h4 class="{{axeAlert.textContext}}"><i class="fa fa-lg {{axeAlert.faIcon}}"><\/i> {{axeAlert.heading}}<\/h4><\/div><div class="modal-body"><p>{{axeAlert.message}}<\/p><\/div><div class="modal-footer"><div class="btn-group axe-btn-group"><button type="submit" class="btn btn-xs btn-default" ng-click="axeAlert.close($event)">Ok<\/button><\/div><\/div>')}]);angular.module("templates/axeConfirm.html",[]).run(["$templateCache",function(n){n.put("templates/axeConfirm.html",'<div class="modal-header"><h4 class="text-primary"><i class="fa fa-lg fa-question-circle"><\/i> {{axeConfirm.heading}}<\/h4><\/div><div class="modal-body"><p>{{axeConfirm.message}}<\/p><\/div><div class="modal-footer"><div class="btn-group btn-group-xs axe-btn-group"><button type="submit" class="btn btn-primary" ng-click="axeConfirm.yes($event)">{{axeConfirm.yesButtonText}}<\/button><button type="reset" class="btn btn-default" ng-click="axeConfirm.no($event)">{{axeConfirm.noButtonText}}<\/button><\/div><\/div>')}]);angular.module("templates/axeContext.html",[]).run(["$templateCache",function(n){n.put("templates/axeContext.html",'<div ng-if="axeContext.heading" class="text-center"><h4 class="text-primary">{{axeContext.heading}}<\/h4><\/div><ng-transclude><\/ng-transclude>')}]);angular.module("templates/axeForm.html",[]).run(["$templateCache",function(n){n.put("templates/axeForm.html",'<div class="panel panel-default form-horizontal" ng-form="form"><div ng-if="axeForm.heading" class="panel-heading"><h4>{{axeForm.heading}}<span ng-show="axeForm.hasError"> <i class="fa fa-exclamation-triangle text-danger"><\/i><\/span><span ng-if="axeForm.subheading" class="small"><br />{{axeForm.subheading}}<\/span><\/h4><\/div><div class="panel-body"><ul ng-if="axeForm.sections.length > 1" class="nav nav-tabs"><li ng-repeat="section in axeForm.sections" ng-class="{active: section.$active}" ng-click="axeForm.activateSection(section)"><a href>{{section.heading}}<span ng-show="section.hasError"> <i class="fa fa-exclamation-triangle text-danger"><\/i><\/span><\/a><\/li><\/ul><br ng-if="axeForm.sections.length > 1" /><ng-transclude><\/ng-transclude><\/div><div class="panel-footer clearfix"><div class="pull-right"><div ng-hide="axeForm.dirty" class="btn-group axe-btn-group"><button ng-if="axeForm.deleteable" type="button" class="btn btn-danger" ng-click="axeForm.delete($event)"><i class="fa fa-trash-o"><\/i> Delete<\/button><button type="button" class="btn btn-default" ng-click="axeForm.back($event)"><i class="fa fa-chevron-circle-left"><\/i> Back<\/button><\/div><div ng-show="axeForm.dirty" class="btn-group axe-btn-group"><button type="button" class="btn btn-warning" ng-click="axeForm.undo($event)"><i class="fa fa-undo"><\/i> Undo<\/button><button type="button" class="btn" ng-class="{\'btn-primary\': axeForm.valid, \'btn-default\': axeForm.invalid}" ng-click="axeForm.save($event)" ng-disabled="axeForm.invalid"><i class="fa fa-save"><\/i> Save<\/button><\/div><\/div><\/div><\/div>')}]);angular.module("templates/axeFormSection.html",[]).run(["$templateCache",function(n){n.put("templates/axeFormSection.html",'<div ng-show="axeFormSection.$active" ng-form="form" ng-transclude><\/div>')}]);angular.module("templates/axeFormLabel.html",[]).run(["$templateCache",function(n){n.put("templates/axeFormLabel.html",'<div class="form-group" ng-class="{\'has-error\': axeFormLabel.hasError}" ng-form="form"><label class="control-label col-sm-{{axeFormLabel.labelWidth}}">{{axeFormLabel.heading}}<\/label><div class="col-sm-{{axeFormLabel.itemWidth}}" ng-transclude><\/div><\/div>')}]);
//# sourceMappingURL=axe.min.js.map
